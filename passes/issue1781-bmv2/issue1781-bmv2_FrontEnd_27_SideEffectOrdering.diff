--- before_pass
+++ after_pass
@@ -15,11 +15,21 @@ bit<32> test_func() {
 control IngressImpl(inout headers hdr, inout metadata meta, inout standard_metadata_t standard_metadata) {
     bit<32> value_0;
     @name("update_value") action update_value_0(out bit<32> value) {
-        value = test_func();
+        bit<32> tmp;
+        {
+            tmp = test_func();
+            value = tmp;
+        }
     }
+    bit<32> tmp_0;
     apply {
-        value_0 = test_func();
-        update_value_0(value_0);
+        {
+            tmp_0 = test_func();
+            value_0 = tmp_0;
+        }
+        {
+            update_value_0(value_0);
+        }
     }
 }
 control VerifyChecksumImpl(inout headers hdr, inout metadata meta) {

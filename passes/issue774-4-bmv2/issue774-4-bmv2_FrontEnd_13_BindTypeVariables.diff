--- before_pass
+++ after_pass
@@ -11,7 +11,7 @@ struct M {
 parser prs(packet_in p, out Headers h, inout M meta, inout standard_metadata_t s) {
     state start {
         p.extract<Header>(_);
-        p.extract(h.h);
+        p.extract<Header>(h.h);
         transition accept;
     }
 }
@@ -33,7 +33,7 @@ control cc(inout Headers hdr, inout M me
 }
 control d(packet_out b, in Headers hdr) {
     apply {
-        b.emit(hdr);
+        b.emit<Headers>(hdr);
     }
 }
-V1Switch(prs(), vc(), i(), e(), cc(), d()) main;
+V1Switch<Headers, M>(prs(), vc(), i(), e(), cc(), d()) main;

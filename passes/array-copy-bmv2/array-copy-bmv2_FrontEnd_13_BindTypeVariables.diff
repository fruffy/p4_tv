--- before_pass
+++ after_pass
@@ -11,8 +11,8 @@ struct Meta {
 }
 parser P(packet_in p, out Headers h, inout Meta m, inout standard_metadata_t sm) {
     state start {
-        p.extract(h.h1.next);
-        p.extract(h.h1.next);
+        p.extract<Hdr>(h.h1.next);
+        p.extract<Hdr>(h.h1.next);
         h.h2 = h.h1;
         transition accept;
     }
@@ -31,7 +31,7 @@ control egress(inout Headers h, inout Me
 }
 control deparser(packet_out b, in Headers h) {
     apply {
-        b.emit(h);
+        b.emit<Headers>(h);
     }
 }
 control ingress(inout Headers h, inout Meta m, inout standard_metadata_t sm) {
@@ -39,4 +39,4 @@ control ingress(inout Headers h, inout M
         sm.egress_spec = (bit<9>)9w0;
     }
 }
-V1Switch(P(), vrfy(), ingress(), egress(), update(), deparser()) main;
+V1Switch<Headers, Meta>(P(), vrfy(), ingress(), egress(), update(), deparser()) main;

--- before_pass
+++ after_pass
@@ -9,17 +9,6 @@ enum Choice {
     First,
     Second
 }
-control compute(inout hdr h) {
-    Choice c_0;
-    apply {
-        c_0 = Choice.First;
-        if (c_0 == Choice.Second) {
-            h.c = h.a;
-        } else {
-            h.c = h.b;
-        }
-    }
-}
 struct Headers {
     hdr h;
 }
@@ -49,9 +38,16 @@ control deparser(packet_out b, in Header
     }
 }
 control ingress(inout Headers h, inout Meta m, inout standard_metadata_t sm) {
-    @name("c") compute() c_1;
+    Choice c_c;
     apply {
-        c_1.apply(h.h);
+        {
+            c_c = Choice.First;
+            if (c_c == Choice.Second) {
+                h.h.c = h.h.a;
+            } else {
+                h.h.c = h.h.b;
+            }
+        }
         sm.egress_spec = 9w0;
     }
 }

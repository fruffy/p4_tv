--- before_pass
+++ after_pass
@@ -12,7 +12,9 @@ struct metadata {
 }
 parser parserI(packet_in pkt, out headers hdr, inout metadata meta, inout standard_metadata_t stdmeta) {
     state start {
-        pkt.extract<h1_t>(hdr.h1);
+        {
+            pkt.extract<h1_t>(hdr.h1);
+        }
         transition accept;
     }
 }
@@ -27,9 +29,23 @@ control cDoOneOp(inout headers hdr, in b
 }
 control cIngress(inout headers hdr, inout metadata meta, inout standard_metadata_t stdmeta) {
     @name("do_one_op") cDoOneOp() do_one_op_0;
-    apply {
-        do_one_op_0.apply(hdr, hdr.h1.op1);
-        do_one_op_0.apply(hdr, hdr.h1.op2);
+    headers tmp;
+    bit<8> tmp_0;
+    headers tmp_1;
+    bit<8> tmp_2;
+    apply {
+        {
+            tmp = hdr;
+            tmp_0 = hdr.h1.op1;
+            do_one_op_0.apply(tmp, tmp_0);
+            hdr = tmp;
+        }
+        {
+            tmp_1 = hdr;
+            tmp_2 = hdr.h1.op2;
+            do_one_op_0.apply(tmp_1, tmp_2);
+            hdr = tmp_1;
+        }
     }
 }
 control cEgress(inout headers hdr, inout metadata meta, inout standard_metadata_t stdmeta) {
@@ -46,7 +62,9 @@ control uc(inout headers hdr, inout meta
 }
 control DeparserI(packet_out packet, in headers hdr) {
     apply {
-        packet.emit<h1_t>(hdr.h1);
+        {
+            packet.emit<h1_t>(hdr.h1);
+        }
     }
 }
 V1Switch<headers, metadata>(parserI(), vc(), cIngress(), cEgress(), uc(), DeparserI()) main;
